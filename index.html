<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>RamDev Shop - Sweets & Cakes</title>
    <!-- External Dependencies -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Inter:wght@400;500;600;700;900&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <style>
      body {
        font-family: 'Inter', sans-serif;
        background-color: #fffaf0;
        margin: 0;
        padding: 0;
        -webkit-tap-highlight-color: transparent;
      }
      #loader {
        position: fixed;
        inset: 0;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        background: #fffaf0;
        z-index: 9999;
        transition: opacity 0.4s ease-out;
      }
      .spinner {
        width: 45px;
        height: 45px;
        border: 4px solid #fed7aa;
        border-top: 4px solid #ea580c;
        border-radius: 50%;
        animation: spin 0.8s linear infinite;
      }
      @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
      
      h1, h2, h3 { font-family: 'Playfair Display', serif; }
      .no-scrollbar::-webkit-scrollbar { display: none; }
      .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
      
      .product-grid {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 12px;
      }
      
      .fade-in {
        animation: fadeIn 0.3s ease-in-out;
      }
      @keyframes fadeIn {
        from { opacity: 0; transform: translateY(10px); }
        to { opacity: 1; transform: translateY(0); }
      }

      .scale-up {
        animation: scaleUp 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      }
      @keyframes scaleUp {
        from { transform: scale(0.5); opacity: 0; }
        to { transform: scale(1); opacity: 1; }
      }

      .animate-slideUp {
        animation: slideUp 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.1);
      }
      @keyframes slideUp {
        from { transform: translateY(100%); opacity: 0; }
        to { transform: translateY(0); opacity: 1; }
      }

      button:focus-visible, input:focus-visible, textarea:focus-visible {
        outline: 2px solid #ea580c;
        outline-offset: 2px;
      }

      .detail-hero-mask {
        mask-image: linear-gradient(to bottom, black 80%, transparent 100%);
        -webkit-mask-image: linear-gradient(to bottom, black 80%, transparent 100%);
      }

      .star-rating-btn {
        transition: all 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      }
      .star-rating-btn:active {
        transform: scale(1.4);
      }
    </style>

    <script type="importmap">
{
  "imports": {
    "react": "https://esm.sh/react@19.0.0",
    "react-dom/client": "https://esm.sh/react-dom@19.0.0/client",
    "react/": "https://esm.sh/react@^19.2.3/"
  }
}
</script>
  </head>
  <body>
    <!-- Initial Loading Screen -->
    <div id="loader" role="status" aria-label="Loading application">
      <div class="spinner"></div>
      <p id="loader-title" style="margin-top: 20px; font-weight: 700; color: #9a3412; font-family: 'Playfair Display', serif; font-size: 22px;">RamDev Shop</p>
      <p id="loader-sub" style="margin-top: 8px; font-size: 13px; color: #c2410c; opacity: 0.8; font-weight: 500;">Fresh & Delicious...</p>
    </div>

    <div id="root"></div>

    <script type="text/babel" data-type="module">
      import React, { useState, useMemo, useCallback, useEffect, useRef } from 'react';
      import ReactDOM from 'react-dom/client';

      /** --- CONFIGURATION --- **/
      const SHOP_NAME = "RamDev Shop";
      const OWNER_WHATSAPP = "919867637326"; 
      const UPI_ID = "pawanponnam-1@okicici";
      const ADMIN_PASSWORD = "Pawan1645@";

      const LANGUAGES = [
        { code: 'en', name: 'English', label: 'English' },
        { code: 'hi', name: 'Hindi', label: 'à¤¹à¤¿à¤‚à¤¦à¥€' },
        { code: 'mr', name: 'Marathi', label: 'à¤®à¤°à¤¾à¤ à¥€' },
        { code: 'te', name: 'Telugu', label: 'à°¤à±†à°²à±à°—à±' }
      ];

      const TRANSLATIONS = {
        en: {
          hello: "Hello There!",
          enter_details: "Please enter your details once to start ordering delicious treats.",
          modify_details: "Modify your default delivery details below.",
          name_label: "Your Name",
          name_placeholder: "Enter full name",
          whatsapp_label: "WhatsApp Number",
          whatsapp_placeholder: "10 digit mobile number",
          address_label: "Exact Delivery Address",
          address_placeholder: "Building name, street, area, landmark...",
          lang_label: "Preferred Language",
          save_btn: "SAVE & START SHOPPING",
          update_btn: "UPDATE PROFILE",
          back_btn: "Back to Menu",
          hi_user: "Hi",
          sweets: "Sweets",
          cakes: "Cakes",
          snacks: "Snacks",
          drinks: "Drinks",
          coming_soon: "Coming Soon",
          preparing_menu: "Our kitchen is currently preparing a fresh menu for",
          stay_tuned: "Stay tuned!",
          items: "Items",
          add_to_cart: "ADD TO CART",
          order_now: "ORDER NOW",
          description: "Description",
          grand_total: "Grand Total",
          proceed_order: "PROCEED TO ORDER",
          your_cart: "Your Cart",
          cart_empty: "Your cart is empty",
          explore: "Explore Menu",
          subtotal: "Subtotal",
          platform_fee: "Platform Fee",
          delivery: "Delivery",
          free: "FREE",
          order_history: "Order History",
          no_orders: "No orders yet",
          checkout: "Checkout",
          payment_method: "Payment Method",
          upi_scan: "UPI Scan & Pay",
          cod: "Cash on Delivery",
          proceed_wa: "PROCEED TO WHATSAPP",
          order_confirmed: "Order Confirmed!",
          finalize_wa: "Please finalize the confirmation on WhatsApp.",
          submit_rating: "SUBMIT RATING",
          how_was_exp: "How was your experience?",
          comments_label: "Your Comments",
          sent: "SENT",
          total_amt: "Total Amount",
          delivery_method: "Delivery Method",
          home_delivery: "Home Delivery",
          store_pickup: "Store Pickup",
          admin_title: "Owner Panel",
          admin_login: "Staff Login",
          password_label: "Secret Key",
          login_btn: "ACCESS PANEL",
          gh_token_label: "GitHub Token (PAT Classic)",
          gh_repo_label: "Repository Path (owner/repo)",
          sync_btn: "SYNC TO GITHUB LIVE",
          add_product: "ADD PRODUCT",
          edit_product: "EDIT ITEM",
          save_changes: "SAVE UPDATES",
          delete_confirm: "Are you sure you want to delete this product?",
          staff_access: "Staff Access"
        }
      };

      const PLATFORM_FEE = 1;
      const FREE_DELIVERY_THRESHOLD = 100;
      const DELIVERY_CHARGE = 10;

      /** --- UTILITIES --- **/
      const openWhatsApp = (message) => {
        const url = `https://api.whatsapp.com/send?phone=${OWNER_WHATSAPP}&text=${encodeURIComponent(message)}`;
        window.location.href = url;
      };

      /** --- COMPONENTS --- **/

      const AdminLogin = ({ onLogin, onBack, t }) => {
        const [pass, setPass] = useState('');
        const [error, setError] = useState(false);

        const handleLogin = () => {
          if (pass === ADMIN_PASSWORD) onLogin();
          else { setError(true); setTimeout(() => setError(false), 2000); }
        };

        return (
          <div className="min-h-screen bg-white flex flex-col items-center justify-center p-8 fade-in text-center">
            <div className={`w-20 h-20 rounded-3xl mb-6 flex items-center justify-center text-3xl transition-all ${error ? 'bg-red-100 text-red-600' : 'bg-orange-100 text-orange-600'}`}>
              <i className={`fas ${error ? 'fa-lock' : 'fa-user-shield'}`}></i>
            </div>
            <h1 className="text-3xl font-black text-gray-900 mb-2">{t('admin_login')}</h1>
            <p className="text-gray-500 text-sm mb-8">Unauthorized access is prohibited.</p>
            
            <div className="w-full max-w-xs space-y-4">
              <input 
                type="password" 
                placeholder={t('password_label')}
                className="w-full p-4 bg-gray-50 rounded-2xl border-2 border-transparent focus:border-orange-500 outline-none transition-all text-center font-bold tracking-widest"
                value={pass}
                onChange={e => setPass(e.target.value)}
                onKeyPress={e => e.key === 'Enter' && handleLogin()}
              />
              <button onClick={handleLogin} className="w-full py-4 bg-orange-600 text-white rounded-2xl font-black shadow-xl active:scale-95 transition-transform uppercase text-sm">
                {t('login_btn')}
              </button>
              <button onClick={onBack} className="text-gray-400 font-bold text-xs uppercase tracking-widest pt-4">{t('back_btn')}</button>
            </div>
          </div>
        );
      };

      const AdminDashboard = ({ products, onUpdateProducts, onBack, t }) => {
        const [editingProduct, setEditingProduct] = useState(null);
        const [localProducts, setLocalProducts] = useState(products);
        const [ghToken, setGhToken] = useState(localStorage.getItem('gh_pat') || '');
        const [ghRepo, setGhRepo] = useState(localStorage.getItem('gh_repo') || '');
        const [isSyncing, setIsSyncing] = useState(false);
        const [syncStatus, setSyncStatus] = useState(null);

        const handleSaveProduct = (p) => {
          const newList = p.isNew 
            ? [...localProducts, { ...p, isNew: undefined }] 
            : localProducts.map(item => item.id === p.id ? p : item);
          setLocalProducts(newList);
          setEditingProduct(null);
        };

        const syncToGithub = async () => {
          if (!ghToken || !ghRepo) return alert("Missing GitHub credentials in settings.");
          setIsSyncing(true);
          setSyncStatus('Fetching File...');
          localStorage.setItem('gh_pat', ghToken);
          localStorage.setItem('gh_repo', ghRepo);

          try {
            const url = `https://api.github.com/repos/${ghRepo}/contents/products.json`;
            const headers = { 'Authorization': `token ${ghToken}`, 'Accept': 'application/vnd.github.v3+json' };
            const getRes = await fetch(url, { headers });
            if (!getRes.ok) throw new Error('File not found in repository.');
            const { sha } = await getRes.json();

            setSyncStatus('Pushing Changes...');
            const putRes = await fetch(url, {
              method: 'PUT',
              headers,
              body: JSON.stringify({
                message: `Admin Update: ${new Date().toLocaleString()}`,
                content: btoa(unescape(encodeURIComponent(JSON.stringify(localProducts, null, 2)))),
                sha
              })
            });

            if (!putRes.ok) throw new Error('Failed to update GitHub');
            setSyncStatus('Success!');
            onUpdateProducts(localProducts);
            setTimeout(() => setSyncStatus(null), 3000);
          } catch (err) {
            alert(err.message);
            setSyncStatus('Error');
          } finally { setIsSyncing(false); }
        };

        return (
          <div className="min-h-screen bg-[#fffaf0] pb-32 fade-in p-4 pt-8 text-left">
            <div className="flex items-center justify-between mb-8 px-2">
              <div><h1 className="text-3xl font-black text-gray-900">{t('admin_title')}</h1><p className="text-[10px] font-bold text-orange-600 uppercase tracking-widest">Live Repository Management</p></div>
              <button onClick={onBack} className="w-10 h-10 bg-white rounded-full flex items-center justify-center border border-orange-100"><i className="fas fa-times text-gray-400"></i></button>
            </div>

            <div className="bg-white rounded-3xl p-6 mb-8 border border-orange-100 shadow-sm space-y-4">
              <h3 className="text-[10px] font-black uppercase text-gray-400 tracking-widest flex items-center gap-2"><i className="fab fa-github"></i> Sync Settings</h3>
              <input type="password" placeholder={t('gh_token_label')} className="w-full p-4 bg-gray-50 rounded-xl outline-none text-xs" value={ghToken} onChange={e => setGhToken(e.target.value)} />
              <input type="text" placeholder={t('gh_repo_label')} className="w-full p-4 bg-gray-50 rounded-xl outline-none text-xs" value={ghRepo} onChange={e => setGhRepo(e.target.value)} />
              <button disabled={isSyncing} onClick={syncToGithub} className={`w-full py-4 rounded-2xl font-black flex items-center justify-center gap-3 transition-all ${isSyncing ? 'bg-gray-100 text-gray-400' : 'bg-green-600 text-white shadow-xl active:scale-95'}`}>
                {isSyncing ? <div className="spinner !w-4 !h-4 !border-2"></div> : <i className="fas fa-cloud-upload-alt"></i>}
                {syncStatus || t('sync_btn')}
              </button>
            </div>

            <button onClick={() => setEditingProduct({ id: Date.now().toString(), name: '', price: 0, weight: '', category: 'Sweets', image: '', description: '', isNew: true })} className="w-full py-4 bg-white border-2 border-dashed border-orange-200 rounded-2xl text-orange-400 font-black text-xs uppercase tracking-widest mb-4 flex items-center justify-center gap-2">
              <i className="fas fa-plus"></i> {t('add_product')}
            </button>
            
            <div className="space-y-3">
              {localProducts.map(p => (
                <div key={p.id} className="bg-white p-4 rounded-2xl border border-orange-50 shadow-sm flex items-center gap-4">
                  <img src={p.image} className="w-12 h-12 object-cover rounded-xl bg-gray-100" />
                  <div className="flex-1 text-left"><h4 className="font-black text-sm text-gray-900">{p.name}</h4><p className="text-[10px] text-gray-400 font-bold uppercase tracking-tighter">â‚¹{p.price} â€¢ {p.weight} â€¢ {p.category}</p></div>
                  <div className="flex gap-1">
                    <button onClick={() => setEditingProduct(p)} className="w-8 h-8 bg-orange-50 text-orange-600 rounded-lg flex items-center justify-center"><i className="fas fa-pen text-[10px]"></i></button>
                    <button onClick={() => { if(confirm(t('delete_confirm'))) setLocalProducts(localProducts.filter(x => x.id !== p.id)); }} className="w-8 h-8 bg-red-50 text-red-600 rounded-lg flex items-center justify-center"><i className="fas fa-trash text-[10px]"></i></button>
                  </div>
                </div>
              ))}
            </div>

            {editingProduct && (
              <div className="fixed inset-0 z-[100] bg-black/60 backdrop-blur-sm flex items-end justify-center p-4">
                <div className="bg-white w-full max-w-md rounded-t-[40px] p-8 animate-slideUp overflow-y-auto max-h-[90vh]">
                  <h3 className="text-xl font-black mb-6">{editingProduct.isNew ? t('add_product') : t('edit_product')}</h3>
                  <div className="space-y-4 text-left">
                    <input className="w-full p-4 bg-gray-50 rounded-xl" placeholder="Product Name" value={editingProduct.name} onChange={e => setEditingProduct({...editingProduct, name: e.target.value})} />
                    <div className="grid grid-cols-2 gap-4">
                      <input type="number" className="w-full p-4 bg-gray-50 rounded-xl" placeholder="Price (â‚¹)" value={editingProduct.price} onChange={e => setEditingProduct({...editingProduct, price: parseInt(e.target.value) || 0})} />
                      <input className="w-full p-4 bg-gray-50 rounded-xl" placeholder="Weight (e.g. 250g)" value={editingProduct.weight} onChange={e => setEditingProduct({...editingProduct, weight: e.target.value})} />
                    </div>
                    <select className="w-full p-4 bg-gray-50 rounded-xl" value={editingProduct.category} onChange={e => setEditingProduct({...editingProduct, category: e.target.value})}><option>Sweets</option><option>Cakes</option><option>Snacks</option><option>Drinks</option></select>
                    <input className="w-full p-4 bg-gray-50 rounded-xl font-mono text-xs" placeholder="Image Filename" value={editingProduct.image} onChange={e => setEditingProduct({...editingProduct, image: e.target.value})} />
                    <textarea className="w-full p-4 bg-gray-50 rounded-xl resize-none" rows="2" placeholder="Short Description" value={editingProduct.description} onChange={e => setEditingProduct({...editingProduct, description: e.target.value})} />
                    <div className="pt-4 flex gap-3"><button onClick={() => setEditingProduct(null)} className="flex-1 py-4 bg-gray-100 text-gray-400 rounded-2xl font-black uppercase text-xs tracking-widest">Cancel</button><button onClick={() => handleSaveProduct(editingProduct)} className="flex-2 py-4 bg-orange-600 text-white rounded-2xl font-black uppercase text-xs px-8 tracking-widest shadow-lg">Save Changes</button></div>
                  </div>
                </div>
              </div>
            )}
          </div>
        );
      };

      const ProfileSetupView = ({ initialData, onSave, onOpenAdmin, isEditing, t }) => {
        const [form, setForm] = useState(initialData || { fullName: '', phone: '', address: '', language: 'en' });
        const isValid = form.fullName.trim() !== '' && form.phone.length >= 10 && form.address.trim().length > 5;

        return (
          <div className="min-h-screen bg-white flex flex-col p-8 fade-in text-center">
            <div className="mt-12 mb-10">
              <div className="w-20 h-20 bg-orange-100 rounded-[24px] flex items-center justify-center text-orange-600 text-3xl mx-auto mb-6 shadow-inner scale-up">
                <i className={`fas ${isEditing ? 'fa-user-edit' : 'fa-hand-sparkles'}`}></i>
              </div>
              <h1 className="text-3xl font-black text-gray-900 mb-2 leading-tight uppercase tracking-tighter">{isEditing ? t('update_btn') : t('hello')}</h1>
              <p className="text-gray-500 text-sm px-4">
                {isEditing ? t('modify_details') : t('enter_details')}
              </p>
            </div>

            <div className="space-y-5 text-left flex-1">
              <div>
                <label className="text-[10px] font-black text-gray-400 uppercase tracking-widest mb-1 ml-1 block">{t('lang_label')}</label>
                <div className="grid grid-cols-2 gap-2">
                  {LANGUAGES.map(lang => (
                    <button key={lang.code} onClick={() => setForm({...form, language: lang.code})} className={`py-3 rounded-xl text-xs font-bold border-2 transition-all ${form.language === lang.code ? 'border-orange-500 bg-orange-50 text-orange-900' : 'border-gray-100 bg-gray-50 text-gray-400'}`}>{lang.label}</button>
                  ))}
                </div>
              </div>

              <div>
                <label className="text-[10px] font-black text-gray-400 uppercase tracking-widest mb-1 ml-1 block">{t('name_label')}</label>
                <input className="w-full p-4 bg-gray-50 rounded-2xl border-none outline-none font-medium text-sm" placeholder={t('name_placeholder')} value={form.fullName} onChange={e => setForm({...form, fullName: e.target.value})} />
              </div>
              <div>
                <label className="text-[10px] font-black text-gray-400 uppercase tracking-widest mb-1 ml-1 block">{t('whatsapp_label')}</label>
                <input className="w-full p-4 bg-gray-50 rounded-2xl border-none outline-none font-medium text-sm" placeholder={t('whatsapp_placeholder')} type="tel" value={form.phone} onChange={e => setForm({...form, phone: e.target.value})} />
              </div>
              <div>
                <label className="text-[10px] font-black text-gray-400 uppercase tracking-widest mb-1 ml-1 block">{t('address_label')}</label>
                <textarea className="w-full p-4 bg-gray-50 rounded-2xl border-none outline-none font-medium text-sm resize-none" placeholder={t('address_placeholder')} rows="3" value={form.address} onChange={e => setForm({...form, address: e.target.value})} />
              </div>
            </div>

            <div className="mt-8 space-y-4">
              <button disabled={!isValid} onClick={() => onSave(form)} className={`w-full py-5 rounded-2xl font-black shadow-xl transition-all ${isValid ? 'bg-orange-600 text-white active:scale-95' : 'bg-gray-100 text-gray-300'}`}>
                {isEditing ? t('update_btn') : t('save_btn')}
              </button>
              
              <div className="flex flex-col items-center gap-2">
                {isEditing && (
                  <button onClick={() => onSave(null)} className="text-gray-400 font-bold text-xs uppercase tracking-widest py-2">
                    {t('back_btn')}
                  </button>
                )}
                
                {/* Secret Admin Button */}
                <button onClick={onOpenAdmin} className="text-[10px] font-black text-orange-200 uppercase tracking-widest py-2 hover:text-orange-600 transition-colors">
                  <i className="fas fa-user-shield mr-1"></i> {t('staff_access')}
                </button>
              </div>
            </div>
          </div>
        );
      };

      const Header = ({ cartCount, profile, onOpenCart, onOpenOrders, onEditProfile, onOpenAdmin, t }) => (
        <header className="fixed top-0 left-0 right-0 max-w-md mx-auto z-50 bg-white/95 backdrop-blur-sm shadow-sm px-4 py-3 flex items-center justify-between border-b border-orange-50">
          <div className="flex items-center gap-2">
            <button onClick={onEditProfile} className="w-9 h-9 bg-orange-600 rounded-lg flex items-center justify-center text-white active:scale-90 transition-transform"><i className="fas fa-user-circle"></i></button>
            <div className="flex flex-col text-left cursor-pointer" onClick={onOpenAdmin}>
              <h1 className="text-sm font-black text-gray-900 leading-none">{SHOP_NAME}</h1>
              {profile && <p className="text-[9px] font-bold text-orange-600 mt-0.5">{t('hi_user')}, {profile.fullName.split(' ')[0]}</p>}
            </div>
          </div>
          <div className="flex items-center gap-1">
            <button onClick={onOpenOrders} className="w-10 h-10 flex items-center justify-center text-gray-400"><i className="fas fa-clock-rotate-left"></i></button>
            <button onClick={onOpenCart} className="relative w-10 h-10 flex items-center justify-center text-gray-700">
              <i className="fas fa-shopping-basket text-xl"></i>
              {cartCount > 0 && <span className="absolute top-0 right-0 bg-red-600 text-white text-[10px] font-black w-4 h-4 rounded-full flex items-center justify-center border-2 border-white">{cartCount}</span>}
            </button>
          </div>
        </header>
      );

      const App = () => {
        const [view, setView] = useState('onboarding'); 
        const [products, setProducts] = useState([]);
        const [cart, setCart] = useState([]);
        const [category, setCategory] = useState('Sweets');
        const [profile, setProfile] = useState(null);
        const [isAdminAuth, setIsAdminAuth] = useState(false);
        const [isLoading, setIsLoading] = useState(true);

        const currentLang = profile?.language || 'en';
        const t = (key) => TRANSLATIONS[currentLang]?.[key] || TRANSLATIONS['en'][key] || key;

        useEffect(() => {
          const init = async () => {
            try { const res = await fetch('./products.json'); setProducts(await res.json()); } catch(e) {}
            const stored = localStorage.getItem('ramdev_profile');
            if (stored) { setProfile(JSON.parse(stored)); setView('catalog'); }
            setIsLoading(false);
          };
          init();
        }, []);

        useEffect(() => {
          const loader = document.getElementById('loader');
          if (loader && !isLoading) { loader.style.opacity = '0'; setTimeout(() => loader.remove(), 400); }
        }, [isLoading]);

        const total = cart.reduce((s, i) => s + i.price * i.quantity, 0);
        const deliveryCharge = total < FREE_DELIVERY_THRESHOLD ? DELIVERY_CHARGE : 0;
        const grandTotal = total + (cart.length > 0 ? PLATFORM_FEE + deliveryCharge : 0);

        if (isLoading) return null;
        if (view === 'admin_login') return <AdminLogin onLogin={() => { setIsAdminAuth(true); setView('admin_panel'); }} onBack={() => setView(profile ? 'catalog' : 'onboarding')} t={t} />;
        if (view === 'admin_panel' && isAdminAuth) return <AdminDashboard products={products} onUpdateProducts={setProducts} onBack={() => setView('catalog')} t={t} />;

        if (view === 'onboarding' || view === 'edit_profile') {
          return <ProfileSetupView 
            initialData={profile} 
            onSave={(data) => { if(!data) { setView('catalog'); return; } setProfile(data); localStorage.setItem('ramdev_profile', JSON.stringify(data)); setView('catalog'); }} 
            onOpenAdmin={() => setView('admin_login')}
            isEditing={view === 'edit_profile'} 
            t={t} 
          />;
        }

        if (view === 'catalog') return (
          <div className="min-h-screen max-w-md mx-auto bg-[#fffaf0] relative">
            <Header cartCount={cart.length} profile={profile} onOpenCart={() => setView('cart')} onOpenOrders={() => alert('Order History Coming Soon')} onEditProfile={() => setView('edit_profile')} onOpenAdmin={() => setView('admin_login')} t={t} />
            <main className="pt-20 pb-28 px-4 fade-in">
              <nav className="flex gap-2 mb-6 overflow-x-auto no-scrollbar py-2">
                {['Sweets', 'Cakes', 'Snacks', 'Drinks'].map(cat => (
                  <button key={cat} onClick={() => setCategory(cat)} className={`px-6 py-2 rounded-full text-[11px] font-black uppercase tracking-widest shadow-sm transition-all ${category === cat ? 'bg-orange-600 text-white' : 'bg-white text-orange-900 border border-orange-100'}`}>{t(cat.toLowerCase()) || cat}</button>
                ))}
              </nav>
              <div className="product-grid">
                {products.filter(p => p.category === category).map(p => (
                  <div key={p.id} className="bg-white rounded-2xl overflow-hidden shadow-sm border border-orange-50 flex flex-col h-full text-left active:scale-[0.98] transition-transform" onClick={() => {
                    setCart(prev => {
                      const ex = prev.find(i => i.id === p.id);
                      return ex ? prev.map(i => i.id === p.id ? {...i, quantity: i.quantity + 1} : i) : [...prev, {...p, quantity: 1}];
                    });
                  }}>
                    <img src={p.image} className="w-full h-32 object-cover" />
                    <div className="p-3 flex-1 flex flex-col">
                      <h3 className="text-sm font-bold text-gray-900 line-clamp-1">{p.name}</h3>
                      <p className="text-[10px] text-gray-400 mb-2 line-clamp-2 leading-tight">{p.description}</p>
                      <div className="mt-auto flex justify-between items-center">
                        <span className="text-sm font-black text-orange-600">â‚¹{p.price}</span>
                        <span className="text-[8px] font-bold text-gray-300 uppercase tracking-tighter">{p.weight}</span>
                      </div>
                    </div>
                  </div>
                ))}
              </div>
            </main>
            {cart.length > 0 && <div className="fixed bottom-6 left-4 right-4 max-w-md mx-auto animate-slideUp"><button onClick={() => setView('cart')} className="w-full bg-orange-600 text-white font-black py-4 rounded-2xl shadow-2xl flex justify-between px-6 items-center"><span>{cart.length} {t('items')}</span><span>â‚¹{grandTotal} <i className="fas fa-chevron-right ml-2 text-[10px]"></i></span></button></div>}
          </div>
        );

        if (view === 'cart') return (
          <div className="min-h-screen bg-white p-4 pt-16 text-left fade-in">
            <div className="flex items-center gap-4 mb-8"><button onClick={() => setView('catalog')} className="w-10 h-10 bg-gray-50 rounded-full flex items-center justify-center"><i className="fas fa-arrow-left"></i></button><h2 className="text-2xl font-black">{t('your_cart')}</h2></div>
            <div className="space-y-4 mb-8">
              {cart.map(item => (
                <div key={item.id} className="flex gap-4 p-3 bg-orange-50/30 rounded-2xl border border-orange-100/50">
                  <img src={item.image} className="w-16 h-16 object-cover rounded-xl" />
                  <div className="flex-1">
                    <h4 className="font-bold text-sm">{item.name}</h4>
                    <p className="text-orange-600 font-black">â‚¹{item.price * item.quantity}</p>
                    <div className="flex items-center gap-3 mt-1">
                      <button onClick={() => setCart(cart.map(i => i.id === item.id ? {...i, quantity: Math.max(1, i.quantity - 1)} : i))} className="w-6 h-6 bg-white rounded-lg border text-xs">-</button>
                      <span className="font-bold text-xs">{item.quantity}</span>
                      <button onClick={() => setCart(cart.map(i => i.id === item.id ? {...i, quantity: i.quantity + 1} : i))} className="w-6 h-6 bg-white rounded-lg border text-xs">+</button>
                    </div>
                  </div>
                  <button onClick={() => setCart(cart.filter(i => i.id !== item.id))} className="text-gray-300"><i className="fas fa-times"></i></button>
                </div>
              ))}
            </div>
            <div className="bg-gray-50 p-6 rounded-3xl space-y-2 mb-20 border border-gray-100">
              <div className="flex justify-between text-sm"><span>Subtotal</span><span className="font-bold">â‚¹{total}</span></div>
              <div className="flex justify-between text-sm"><span>Service Fee</span><span className="font-bold">â‚¹{PLATFORM_FEE}</span></div>
              <div className="flex justify-between text-sm"><span>Delivery Charge</span><span className="font-bold">{deliveryCharge === 0 ? 'FREE' : 'â‚¹'+deliveryCharge}</span></div>
              <div className="border-t pt-2 mt-2 flex justify-between font-black text-xl"><span>{t('grand_total')}</span><span className="text-orange-600">â‚¹{grandTotal}</span></div>
            </div>
            <button onClick={() => {
              const msg = `ðŸ›ï¸ *NEW ORDER: ${SHOP_NAME}*\n\nðŸ‘¤ *Customer:* ${profile.fullName}\nðŸ“ž *Phone:* ${profile.phone}\nðŸ“ *Address:* ${profile.address}\n\nðŸ° *Items:*\n${cart.map(i => `â€¢ ${i.name} (x${i.quantity})`).join('\n')}\n\nðŸ’° *Total: â‚¹${grandTotal}*`;
              openWhatsApp(msg);
              setCart([]);
              setView('catalog');
            }} className="w-full bg-orange-600 text-white font-black py-5 rounded-2xl shadow-xl flex items-center justify-center gap-3 uppercase tracking-widest">{t('proceed_wa')} <i className="fab fa-whatsapp text-xl"></i></button>
          </div>
        );

        return null;
      };

      const root = ReactDOM.createRoot(document.getElementById('root'));
      root.render(<App />);
    </script>
  </body>
</html>